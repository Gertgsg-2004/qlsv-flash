{% extends "base.html" %}
{% set title="Home giÃ¡o viÃªn" %}
{% block content %}

<style>
  .hero{
    background: linear-gradient(135deg, rgba(13,110,253,.12), rgba(255,193,7,.10));
    border: 1px solid rgba(0,0,0,.06);
  }
  .card-hover{
    border: 1px solid rgba(0,0,0,.08);
    transition: transform .15s ease, box-shadow .15s ease;
  }
  .card-hover:hover{
    transform: translateY(-2px);
    box-shadow: 0 .6rem 1.2rem rgba(0,0,0,.08);
  }
  .avatar{
    width: 92px; height: 92px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid rgba(255,255,255,.8);
    box-shadow: 0 .4rem 1rem rgba(0,0,0,.10);
  }
  .icon-badge{
    width: 44px; height: 44px;
    border-radius: 14px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    font-size: 20px;
  }
  .quick-link{
    text-decoration:none;
    color: inherit;
    border: 1px solid rgba(0,0,0,.08);
    border-radius: 16px;
    padding: 14px;
    display:flex;
    gap: 12px;
    align-items:center;
    transition: transform .15s ease, box-shadow .15s ease;
    background: #fff;
  }
  .quick-link:hover{
    transform: translateY(-2px);
    box-shadow: 0 .6rem 1.2rem rgba(0,0,0,.08);
  }
  .muted{ color: rgba(0,0,0,.6); }
</style>

<div class="container-fluid">

  <!-- HERO -->
  <div class="card hero mb-4">
    <div class="card-body d-flex flex-wrap align-items-center justify-content-between gap-3">
      <div>
        <div class="d-flex gap-2 align-items-center">
          <span class="badge text-bg-warning">Manager</span>
          <span class="badge text-bg-dark">GiÃ¡o viÃªn</span>
        </div>
        <h3 class="mt-2 mb-1">ChÃ o {{ current_user.ten_sv or current_user.email }} ğŸ‘‹</h3>
        <div class="muted">Äiá»u hÆ°á»›ng nhanh cÃ¡c chá»©c nÄƒng: mÃ´n há»c, lá»›p há»c, bÃ i há»c, ká»³ thi, báº£ng Ä‘iá»ƒm.</div>
      </div>

      <div class="d-flex gap-2">
        <a class="btn btn-outline-dark" href="{{ url_for('account.profile') }}">ğŸ‘¤ Há»“ sÆ¡</a>
        <a class="btn btn-warning" href="{{ url_for('logout') }}">ÄÄƒng xuáº¥t</a>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <!-- LEFT: PROFILE -->
    <div class="col-12 col-xl-4">
      <div class="card card-hover">
        <div class="card-header d-flex justify-content-between align-items-center">
          <b>ThÃ´ng tin cÃ¡ nhÃ¢n</b>
          <span class="badge text-bg-secondary">{{ current_user.role }}</span>
        </div>

        <div class="card-body">
          <div class="text-center mb-3">
            {% if current_user.avatar %}
              <img class="avatar" src="{{ url_for('static', filename='uploads/' ~ current_user.avatar) }}" alt="avatar">
            {% else %}
              <img class="avatar" src="https://via.placeholder.com/92x92.png?text=AVT" alt="avatar">
            {% endif %}
            <div class="mt-3 fw-bold fs-5">{{ current_user.ten_sv or "â€”" }}</div>
            <div class="muted">{{ current_user.ma_sv or current_user.id }}</div>
          </div>

          <hr>

          <div class="mb-2"><b>Email:</b> {{ current_user.email }}</div>
          <div class="mb-2"><b>Giá»›i tÃ­nh:</b> {{ current_user.gioi_tinh or "â€”" }}</div>
          <div class="mb-2"><b>Äá»‹a chá»‰:</b> {{ current_user.dia_chi or "â€”" }}</div>

          <div class="mt-3 d-grid gap-2">
            <a class="btn btn-outline-primary" href="{{ url_for('account.profile') }}">Cáº­p nháº­t há»“ sÆ¡</a>
            <a class="btn btn-outline-warning" href="{{ url_for('account.change_password') }}">Äá»•i máº­t kháº©u</a>
          </div>
        </div>
      </div>

      <!-- Stats -->
      <div class="row g-3 mt-1">
        <div class="col-12 col-md-6 col-xl-12">
          <div class="card card-hover">
            <div class="card-body d-flex justify-content-between align-items-center">
              <div>
                <div class="muted">MÃ´n há»c</div>
                <div class="fs-3 fw-bold">{{ total_subjects if total_subjects is defined else "--" }}</div>
              </div>
              <div class="icon-badge bg-primary-subtle text-primary">ğŸ“˜</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6 col-xl-12">
          <div class="card card-hover">
            <div class="card-body d-flex justify-content-between align-items-center">
              <div>
                <div class="muted">BÃ i há»c</div>
                <div class="fs-3 fw-bold">{{ total_lessons if total_lessons is defined else "--" }}</div>
              </div>
              <div class="icon-badge bg-success-subtle text-success">ğŸ“š</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: QUICK ACTIONS -->
    <div class="col-12 col-xl-8">
      <div class="card card-hover">
        <div class="card-header d-flex justify-content-between align-items-center">
          <b>Chá»©c nÄƒng giÃ¡o viÃªn</b>
          <span class="muted">Äiá»u hÆ°á»›ng nhanh</span>
        </div>

        <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <a class="quick-link" href="{{ url_for('manager.manager_grades') }}">
                <div class="icon-badge bg-primary-subtle text-primary">ğŸ“Š</div>
                <div>
                  <div class="fw-bold">Quáº£n lÃ½ báº£ng Ä‘iá»ƒm</div>
                  <div class="muted small">ThÃªm/sá»­a/xoÃ¡, lá»c theo SV/MÃ´n/Ká»³ thi</div>
                </div>
              </a>
            </div>

            <div class="col-12 col-md-6">
              <a class="quick-link" href="{{ url_for('manager.manager_exams') }}">
                <div class="icon-badge bg-warning-subtle text-warning">ğŸ“</div>
                <div>
                  <div class="fw-bold">Quáº£n lÃ½ ká»³ thi</div>
                  <div class="muted small">Táº¡o ká»³ thi theo mÃ´n + ngÃ y thi</div>
                </div>
              </a>
            </div>

            <div class="col-12 col-md-6">
              <a class="quick-link" href="{{ url_for('manager.manager_lessons') }}">
                <div class="icon-badge bg-success-subtle text-success">ğŸ“š</div>
                <div>
                  <div class="fw-bold">Quáº£n lÃ½ bÃ i há»c</div>
                  <div class="muted small">Ná»™i dung + video + thá»© tá»±</div>
                </div>
              </a>
            </div>

            <div class="col-12 col-md-6">
              <a class="quick-link" href="{{ url_for('manager.manager_subjects') }}">
                <div class="icon-badge bg-info-subtle text-info">ğŸ“˜</div>
                <div>
                  <div class="fw-bold">Quáº£n lÃ½ mÃ´n há»c</div>
                  <div class="muted small">Táº¡o/sá»­a mÃ´n há»c, tÃ­n chá»‰</div>
                </div>
              </a>
            </div>

            <div class="col-12">
              <a class="quick-link" href="{{ url_for('manager.manager_classes') }}">
                <div class="icon-badge bg-dark-subtle text-dark">ğŸ«</div>
                <div>
                  <div class="fw-bold">Quáº£n lÃ½ lá»›p há»c</div>
                  <div class="muted small">Táº¡o lá»›p, gÃ¡n mÃ´n cho lá»›p</div>
                </div>
              </a>
            </div>
          </div>

          <hr class="my-4">

          <div class="d-flex flex-wrap gap-2">
          </div>

        </div>
      </div>
    </div>
  </div>

</div>

{% endblock %}
