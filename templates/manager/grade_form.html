{% extends "base.html" %}
{% if mode == "edit" %}
  {% set title="Sửa điểm (Giáo viên)" %}
{% else %}
  {% set title="Thêm điểm (Giáo viên)" %}
{% endif %}

{% block content %}

<div class="card">
  <div class="card-header">
    <b>{% if mode == "edit" %}Sửa điểm{% else %}Thêm điểm{% endif %}</b>
  </div>

  <div class="card-body">
    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="mb-3">
        <label class="form-label">Sinh viên</label>
        <select class="form-select" name="student_id" required>
          <option value="">-- Chọn sinh viên --</option>
          {% for st in students %}
            <option value="{{ st.id }}" {% if g and g.student_id == st.id %}selected{% endif %}>
              {{ st.ma_sv }} - {{ st.ten_sv }} ({{ st.email }})
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Môn học</label>
        <select class="form-select" name="subject_id" required>
          <option value="">-- Chọn môn --</option>
          {% for s in subjects %}
            <option value="{{ s.id }}" {% if g and g.subject_id == s.id %}selected{% endif %}>
              {{ s.code }} - {{ s.name }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Kỳ thi</label>
        <select class="form-select" name="exam_id" required>
          <option value="">-- Chọn kỳ thi --</option>
          {% for e in exams %}
            <option value="{{ e.id }}" {% if g and g.exam_id == e.id %}selected{% endif %}>
              {{ e.name }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Điểm (0 - 10)</label>
        <input class="form-control" name="score" type="number" step="0.1" min="0" max="10"
               value="{{ g.score if g else '' }}" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Ghi chú</label>
        <textarea class="form-control" name="note" rows="3"
                  placeholder="Tuỳ chọn">{{ g.note if g and g.note else '' }}</textarea>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-primary">
          {% if mode == "edit" %}Lưu{% else %}Tạo mới{% endif %}
        </button>
        <a class="btn btn-secondary" href="{{ url_for('manager.manager_grades') }}">Huỷ</a>
      </div>
    </form>
  </div>
</div>

{% endblock %}
